# üîÑ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Ç–µ–π–ª –¥–∞–Ω–Ω—ã–º–∏ –≤ –ø–æ–ª–Ω—ã—Ö –æ—Ç—á–µ—Ç–∞—Ö

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: –í –∫–∞–Ω–∞–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥—Ä–∏–±—ã –≤ 01:30), –∞ –≤ –∫–∞–Ω–∞–ª–µ –ø–æ–ª–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ü–∏–∫–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç 18:35).

**–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ–ª–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ `self.current_shop_data`, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ WebSocket —Å–æ–±—ã—Ç–∏–π, –Ω–æ –º–æ–≥–ª–∏ –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –∫ –º–æ–º–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. **–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤**
```python
async def _send_full_update(self) -> None:
    """Send full shop report to the full channel with fresh data."""
    # –í—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
    fresh_shop_data = await self.websocket_client.fetch_shop_data()
    
    if fresh_shop_data:
        shop_data = fresh_shop_data
        self.current_shop_data = fresh_shop_data  # –û–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à
    else:
        shop_data = self.current_shop_data  # Fallback –Ω–∞ –∫–µ—à
```

### 2. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–∞–Ω–Ω—ã—Ö**
```python
data_time = shop_data.timestamp.strftime("%H:%M:%S")
logger.info(f"‚úÖ Sent full update with {item_count} items using data from {data_time}")
```

### 3. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–∞–Ω–Ω—ã—Ö –≤ WebSocket –æ–±—Ä–∞–±–æ—Ç–∫–µ**
```python
async def _process_shop_data(self, shop_data: ShopData) -> None:
    data_time = shop_data.timestamp.strftime("%H:%M:%S")
    logger.info(f"Detected {len(new_items)} new items at {data_time}")
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:
1. **WebSocket —Å–æ–±—ã—Ç–∏—è** ‚Üí –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
2. **–ü–æ–ª–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)** ‚Üí –í—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```
02:01:24 | INFO | Detected 3 new items at 02:01:24
02:05:00 | INFO | Fetching fresh shop data for full report  
02:05:01 | INFO | Using fresh shop data from 02:05:01
02:05:02 | INFO | ‚úÖ Sent full update with 15 items using data from 02:05:01
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –û–±–∞ –∫–∞–Ω–∞–ª–∞ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
2. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–∞–Ω–Ω—ã—Ö
3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: Fallback –Ω–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: WebSocket —Å–æ–±—ã—Ç–∏—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–µ—à –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–ª–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤:
```
1. –ó–∞–ø—Ä–æ—Å —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ fetch_shop_data()
2. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ + –æ–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à
3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ + –ª–æ–≥–∏—Ä—É–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è + —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + –æ—Ç–ø—Ä–∞–≤–∫–∞
5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

### –ê–ª–≥–æ—Ä–∏—Ç–º WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
```
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ WebSocket
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞ self.current_shop_data
3. –î–µ—Ç–µ–∫—Ü–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
4. –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```

## üöÄ –î–µ–ø–ª–æ–π

–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤:
- `roblox_garden/core/application.py` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 17 –∏—é–ª—è 2025  
**–í–µ—Ä—Å–∏—è**: 2.1  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
